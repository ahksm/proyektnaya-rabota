<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CreditPro</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <nav class="navbar">
    <div class="container">
      <a href="/" class="logo">
        <div class="logo-icon">üí≥</div>
        <span>CreditPro</span>
      </a>
      <ul class="nav-links">
        <li><a href="/">–ì–ª–∞–≤–Ω–∞—è</a></li>
        <li><a href="/calculator">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</a></li>
        <li><a href="/clients">–ö–ª–∏–µ–Ω—Ç—ã</a></li>
        <li><a href="/credits" class="active">–ö—Ä–µ–¥–∏—Ç—ã</a></li>
      </ul>
    </div>
  </nav>

  <div class="container main-content">
    <div class="page-header">
      <h1>–ö—Ä–µ–¥–∏—Ç—ã</h1>
      <a href="/credits/new" class="btn btn-primary">–û—Ñ–æ—Ä–º–∏—Ç—å –∫—Ä–µ–¥–∏—Ç</a>
    </div>

    <% if (credits.length === 0) { %>
      <div class="empty-state">
        <p>–ö—Ä–µ–¥–∏—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
        <a href="/credits/new" class="btn">–û—Ñ–æ—Ä–º–∏—Ç—å –ø–µ—Ä–≤—ã–π –∫—Ä–µ–¥–∏—Ç</a>
      </div>
    <% } else { %>
      <div class="table-container">
        <table class="data-table">
          <thead>
            <tr>
              <th>–ö–ª–∏–µ–Ω—Ç</th>
              <th>–¢–∏–ø –∫—Ä–µ–¥–∏—Ç–∞</th>
              <th>–°—É–º–º–∞</th>
              <th>–°—Ç–∞–≤–∫–∞</th>
              <th>–°—Ä–æ–∫</th>
              <th>–ï–∂–µ–º–µ—Å—è—á–Ω—ã–π –ø–ª–∞—Ç–µ–∂</th>
              <th>–°—Ç–∞—Ç—É—Å</th>
              <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
          </thead>
          <tbody>
            <% credits.forEach(credit => { %>
              <tr>
                <td><%= credit.client.lastName %> <%= credit.client.firstName %></td>
                <td>
                  <%
                    const typeMap = {
                      'consumer': '–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å—Å–∫–∏–π',
                      'mortgage': '–ò–ø–æ—Ç–µ–∫–∞',
                      'car': '–ê–≤—Ç–æ–∫—Ä–µ–¥–∏—Ç',
                      'business': '–ë–∏–∑–Ω–µ—Å'
                    };
                  %>
                  <%= typeMap[credit.creditType] %>
                </td>
                <td><%= credit.amount.toLocaleString() %> —Å—É–º</td>
                <td><%= credit.interestRate %>%</td>
                <td><%= credit.termMonths %> –º–µ—Å.</td>
                <td><%= credit.monthlyPayment.toLocaleString() %> —Å—É–º</td>
                <td>
                  <%
                    const statusMap = {
                      'active': '–ê–∫—Ç–∏–≤–Ω—ã–π',
                      'closed': '–ó–∞–∫—Ä—ã—Ç',
                      'overdue': '–ü—Ä–æ—Å—Ä–æ—á–µ–Ω'
                    };
                  %>
                  <span class="status-badge status-<%= credit.status %>">
                    <%= statusMap[credit.status] %>
                  </span>
                </td>
                <td class="actions">
                  <a href="/credits/<%= credit._id %>" class="btn-small">–ü—Ä–æ—Å–º–æ—Ç—Ä</a>
                </td>
              </tr>
            <% }); %>
          </tbody>
        </table>
      </div>
    <% } %>
  </div>

  <footer class="footer">
    <div class="container">
      <p>&copy; 2024 CreditPro. –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—Ä–µ–¥–∏—Ç–∞–º–∏.</p>
    </div>
  </footer>
</body>
</html>
