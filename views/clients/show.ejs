<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CreditPro</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <nav class="navbar">
    <div class="container">
      <a href="/" class="logo">
        <div class="logo-icon">üí≥</div>
        <span>CreditPro</span>
      </a>
      <ul class="nav-links">
        <li><a href="/">–ì–ª–∞–≤–Ω–∞—è</a></li>
        <li><a href="/calculator">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</a></li>
        <li><a href="/clients" class="active">–ö–ª–∏–µ–Ω—Ç—ã</a></li>
        <li><a href="/credits">–ö—Ä–µ–¥–∏—Ç—ã</a></li>
      </ul>
    </div>
  </nav>

  <div class="container main-content">
    <div class="page-header">
      <h1><%= client.lastName %> <%= client.firstName %> <%= client.middleName || '' %></h1>
      <div>
        <a href="/clients/<%= client._id %>/edit" class="btn">–ò–∑–º–µ–Ω–∏—Ç—å</a>
        <form action="/clients/<%= client._id %>?_method=DELETE" method="POST" style="display: inline;">
          <button type="submit" class="btn btn-danger" onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã?')">–£–¥–∞–ª–∏—Ç—å</button>
        </form>
      </div>
    </div>

    <div class="detail-card">
      <h2>–õ–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
      <div class="detail-grid">
        <div class="detail-item">
          <span class="label">–§–ò–û:</span>
          <span class="value"><%= client.lastName %> <%= client.firstName %> <%= client.middleName || '' %></span>
        </div>
        <div class="detail-item">
          <span class="label">–ü–∞—Å–ø–æ—Ä—Ç:</span>
          <span class="value"><%= client.passportSeries %></span>
        </div>
        <div class="detail-item">
          <span class="label">–¢–µ–ª–µ—Ñ–æ–Ω:</span>
          <span class="value"><%= client.phoneNumber %></span>
        </div>
        <div class="detail-item">
          <span class="label">Email:</span>
          <span class="value"><%= client.email %></span>
        </div>
        <div class="detail-item">
          <span class="label">–ê–¥—Ä–µ—Å:</span>
          <span class="value"><%= client.address %></span>
        </div>
        <div class="detail-item">
          <span class="label">–ï–∂–µ–º–µ—Å—è—á–Ω—ã–π –¥–æ—Ö–æ–¥:</span>
          <span class="value"><%= client.monthlyIncome.toLocaleString() %> —Å—É–º</span>
        </div>
        <div class="detail-item">
          <span class="label">–°—Ç–∞—Ç—É—Å –∑–∞–Ω—è—Ç–æ—Å—Ç–∏:</span>
          <span class="value">
            <%
              const statusMap = {
                'employed': '–†–∞–±–æ—Ç–∞–µ—Ç',
                'self-employed': '–°–∞–º–æ–∑–∞–Ω—è—Ç—ã–π',
                'unemployed': '–ë–µ–∑—Ä–∞–±–æ—Ç–Ω—ã–π',
                'retired': '–ü–µ–Ω—Å–∏–æ–Ω–µ—Ä'
              };
            %>
            <%= statusMap[client.employmentStatus] %>
          </span>
        </div>
        <div class="detail-item">
          <span class="label">–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:</span>
          <span class="value"><%= new Date(client.createdAt).toLocaleDateString('ru-RU') %></span>
        </div>
      </div>
    </div>

    <div class="detail-card">
      <h2>–ö—Ä–µ–¥–∏—Ç—ã –∫–ª–∏–µ–Ω—Ç–∞</h2>
      <% if (credits.length === 0) { %>
        <p>–£ –∫–ª–∏–µ–Ω—Ç–∞ –Ω–µ—Ç –∫—Ä–µ–¥–∏—Ç–æ–≤</p>
      <% } else { %>
        <div class="table-container">
          <table class="data-table">
            <thead>
              <tr>
                <th>–¢–∏–ø –∫—Ä–µ–¥–∏—Ç–∞</th>
                <th>–°—É–º–º–∞</th>
                <th>–°—Ç–∞–≤–∫–∞</th>
                <th>–°—Ä–æ–∫</th>
                <th>–°—Ç–∞—Ç—É—Å</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
              </tr>
            </thead>
            <tbody>
              <% credits.forEach(credit => { %>
                <tr>
                  <td>
                    <%
                      const typeMap = {
                        'consumer': '–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å—Å–∫–∏–π',
                        'mortgage': '–ò–ø–æ—Ç–µ–∫–∞',
                        'car': '–ê–≤—Ç–æ–∫—Ä–µ–¥–∏—Ç',
                        'business': '–ë–∏–∑–Ω–µ—Å'
                      };
                    %>
                    <%= typeMap[credit.creditType] %>
                  </td>
                  <td><%= credit.amount.toLocaleString() %> —Å—É–º</td>
                  <td><%= credit.interestRate %>%</td>
                  <td><%= credit.termMonths %> –º–µ—Å.</td>
                  <td>
                    <%
                      const statusMapCredit = {
                        'active': '–ê–∫—Ç–∏–≤–Ω—ã–π',
                        'closed': '–ó–∞–∫—Ä—ã—Ç',
                        'overdue': '–ü—Ä–æ—Å—Ä–æ—á–µ–Ω'
                      };
                    %>
                    <%= statusMapCredit[credit.status] %>
                  </td>
                  <td class="actions">
                    <a href="/credits/<%= credit._id %>" class="btn-small">–ü—Ä–æ—Å–º–æ—Ç—Ä</a>
                  </td>
                </tr>
              <% }); %>
            </tbody>
          </table>
        </div>
      <% } %>
    </div>

    <a href="/clients" class="btn btn-secondary">–ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É</a>
  </div>

  <footer class="footer">
    <div class="container">
      <p>&copy; 2024 CreditPro. –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—Ä–µ–¥–∏—Ç–∞–º–∏.</p>
    </div>
  </footer>
</body>
</html>
